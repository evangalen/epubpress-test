(function(z){
'use strict';var HVa=function(a,b){this.user=a;this.quotes=b},IVa=function(a,b){b=b.g();if(b===Number||b.$isProtoEnum)return a=Number(a),Number.isNaN(a)?void 0:a;if(b===Boolean)return!!a;if(b===String)return String(a)},m$=function(a){return a.vy.best||null},n$=function(a,b){b=b.filter(function(a){return"anon"!=a.gb()});b=z.hb(b,function(a){return a.gb()},a);return z.lb(b).map(function(a){return new HVa(a[0].oc(),a)},a)},JVa=function(a,b,c,d){return(0,z.fd)(a.Rr[b.name]||[],function(a){return a.gd()==
c&&a.ee()==d})},o$=function(){this.KC=1},p$=function(a){z.uj.call(this);this.s(a)},KVa=function(a,b){return z.K(a,"slots",b)},LVa=function(a,b){return z.K(a,"requestContext",b)},q$=function(a){z.L.call(this);this.s(a)},r$=function(a){return z.I(a,"inResponseToMediaResource")},s$=function(a){return z.I(a,"mediumQuote")},MVa=function(a,b){a.YK=b;return a},t$=function(a,b){return m$(a)?z.sI(m$(a)).filter(function(a){return this.OZ(a)==b},a):[]},NVa=function(a,b,c){c=c.Rv;b=b.getAttribute("name").split(" ");
var d=z.wb(b);a=(a.Rr[c.name]||[]).filter(function(a){return d[a.ei()]});return a.length?z.Tla(a):null},OVa=function(a,b,c,d){b=JVa(a,b,c,d);return n$(a,b)},PVa=function(a,b){var c=0;(a.Rr[b]||[]).forEach(function(a){"anon"==a.gb()&&(c+=a.re())});return c},QVa=function(a){var b=z.KR(a.lj.qr,a.lj.Em(),a.Wk.qr,a.Wk.Em()).Ca().trim();0<a.lj.Em()&&(b="…"+b);var c=z.hK(a.sc,a.Wk.qr);a.Wk.Em()<c.Ca().length&&(b+="…");return b},RVa=function(a){var b=z.rH(a.oqa),c=a.lj.qr,d=c?b.indexOf(c):-1,e=(c=a.Wk.qr)?
b.indexOf(c):-1;if(-1==d||-1==e)return"";for(c=[];d<=e;d++)c.push(z.hK(a.sc,b[d]));b=z.Qa(c);a=z.iz(c.indexOf(c[0]),a.lj.Em(),c.indexOf(b),a.Wk.Em(),!1);return z.Ky(new z.Ey(z.Lr,z.era),c,a,!0)},SVa=function(a){if(a.lj.qr==a.Wk.qr)return{rO:a.lj.qr.getAttribute("name"),LE:"share",startIndex:a.lj.Em(),endIndex:a.Wk.Em()}},TVa=function(a,b,c){var d=a.ha.ia(z.Jsa,{postId:b},{filter:c});return z.TJ(a,d,function(){return this.qb.mo(d)})},UVa=function(a,b){z.Rx(a,7);var c=new z.Ix("",1,a.Ca());b.forEach(function(a){z.Px(c,
z.xx(a.startOffset,a.endOffset,[a.quoteId],[a.userId]))},a);b=z.Vx(c);for(var d=z.Wx(c,b),e=0;e<b.length;e++){var g=d[e];if(g.length){for(var h={},l=[],p=0;p<g.length;p++){var r=g[p];h[z.I(r,"creatorIds")]=!0;l.push(r.getName())}g=b[e];p=e<b.length-1?b[e+1]:a.Ca().length;z.Px(a,z.xx(g,p,l,Object.keys(h)))}}},VVa=function(a,b,c){b="";a.Kxa?a=z.n("Top highlight"):(c=""+z.A(z.zT(z.C({S_:!0,gea:!c.useragent.isMobile},a),c)),1==a.Oh&&a.isActive&&(a=z.n("highlighted"),c+=" "+a),a=(0,z.y)(c));b+=a;return(0,z.y)(b)},
u$=function(a,b){this.vh=a;this.pka=b;this.ne=(this.Rj=b=z.mH(a.node,b))&&b.getAttribute("name");this.GK=b?z.VC(a,b):-1},WVa=function(a,b,c){return(0,z.y)(z.eT(z.C({user:c.currentUser,type:"quoteResponses"},a),c))},XVa=function(a,b,c){b='\x3cdiv\x3e\x3cdiv class\x3d"buttonSet u-inlineBlock"\x3e'+z.A(z.Wm({action:"quote",source:"quote_popover",icon:(0,z.O)(""+z.A(z.im())),l:(0,z.O)("button--highlightMenu u-sm-height42 u-sm-lineHeight44 u-accentColor--highlightStrong js-quoteAttributions-pileOn"),dc:!0,
Si:!0,q$:"quote",ua:!0,isActive:a.isActive},c))+(c.supportsEdit?z.A(z.Wm({action:"quote-respond",source:"quote_popover",icon:(0,z.O)(""+z.A(z.rm())),l:"button--highlightMenu u-sm-height42 u-sm-lineHeight44",dc:!0,ua:!0},c)):"")+(a.kQ?z.A(z.Wm({action:"twitter",source:"quote_popover",icon:(0,z.O)(""+z.A(z.vm())),l:"button--highlightMenu u-sm-height42 u-sm-lineHeight44",dc:!0,ua:!0},c)):"")+'\x3cdiv class\x3d"buttonSet-separator"\x3e\x3c/div\x3e\x3c/div\x3e';b+='\x3cdiv class\x3d"'+z.E(z.D("js-quoteAttributions-info u-inlineBlock u-verticalAlignTop u-noWrapWithEllipsis u-maxWidth414 u-paddingTop14 u-paddingRight18 u-paddingBottom0 u-paddingLeft10 u-xs-paddingTop13 u-xs-paddingLeft4 u-xs-maxWidth160"))+
'"\x3e'+VVa(a,0,c)+"\x3c/div\x3e\x3c/div\x3e";return(0,z.y)(b)},v$=function(a){z.Pr.call(this);var b=z.et();this.lj=b&&new u$(z.Lt(b,!0),a);this.Wk=b&&new u$(z.Lt(b,!1),a)},w$=function(a){z.L.call(this);this.s(a)},YVa=function(a,b){var c=new z.kk(z.Kr(b)),c=new z.Gd(c.ia(z.Hra)),d=new z.Gd("https://www.facebook.com/v2.3/dialog/share");z.Nd(d,z.$d({app_id:b.facebook.key,href:a.toString(),display:"popup",redirect_uri:c.toString()}));return d},ZVa=function(){var a=z.n("Highlights");return(0,z.y)(""+
a)},$Va=function(a){return(0,z.y)(z.A(z.no(String(a.content)))+" — "+z.A(z.tL(a))+" "+z.A(a.url))},aWa=function(a,b,c){return(0,z.gk)("https://"+z.Rh(c.textshotHost)+"/image")},bWa=function(a,b,c){return(0,z.gk)("https://twitter.com/"+z.Rh(c.currentUser.twitterScreenName)+"/status/"+z.Rh(a.id))},cWa=function(){var a=z.y,b;b=z.n("Failed to load image");b=(0,z.y)(""+b);return a('\x3cspan class\x3d"tweetEditor-imageStatusIcon"\x3e\x26times;\x3c/span\x3e'+z.A(b))},dWa=function(a,b,c){b=z.y;a='\x3cdiv class\x3d"tweetEditor u-sizeFullWidth"\x3e\x3cdiv class\x3d"js-tweetEditor-error tweetEditor-error u-paddingBottom10 u-textAlignCenter u-textColorRed"\x3e\x3c/div\x3e\x3cdiv class\x3d"tweetEditor-avatar"\x3e'+
z.A(z.dp({user:a.user,Ue:!0},c))+'\x3c/div\x3e\x3cdiv class\x3d"tweetEditor-tweetContainer"\x3e\x3cdiv class\x3d"tweetEditor-textContainer"\x3e\x3cdiv class\x3d"js-tweetEditor-text textInput textInput--chromeless u-textAlignLeft"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tweetEditor-textshot"\x3e\x3cdiv class\x3d"js-tweetEditor-imageStatus tweetEditor-imageStatus"\x3e';var d;d=z.n("Loading image attachment…");d=(0,z.y)(""+d);a=a+z.A(d)+"\x3c/div\x3e";d={};d=(0,z.y)(z.xl(z.C({name:"addCircled",
size:"21px",content:(0,z.O)('\x3csvg class\x3d"svgIcon-use" width\x3d"21" height\x3d"21" viewBox\x3d"0 0 21 21" \x3e\x3cpath d\x3d"M2.286 12.691a8.358 8.358 0 0 0 2.192 3.831A8.298 8.298 0 0 0 8.3 18.715c.73.19 1.462.288 2.192.29a8.363 8.363 0 0 0 2.2-.29 8.286 8.286 0 0 0 3.822-2.193 8.264 8.264 0 0 0 2.201-3.82c.19-.732.285-1.462.285-2.193a8.248 8.248 0 0 0-.285-2.2 8.265 8.265 0 0 0-2.2-3.823 8.258 8.258 0 0 0-3.822-2.2A8.66 8.66 0 0 0 10.5 2a8.188 8.188 0 0 0-2.192.286 8.33 8.33 0 0 0-3.831 2.2 8.298 8.298 0 0 0-2.193 3.822A8.66 8.66 0 0 0 2 10.5c0 .731.095 1.461.286 2.191zm1.557-.413a6.74 6.74 0 0 1-.239-1.773c0-.592.08-1.184.24-1.773a6.77 6.77 0 0 1 1.786-3.09 6.73 6.73 0 0 1 3.085-1.79c.59-.16 1.181-.24 1.777-.24.596 0 1.188.08 1.777.24a6.736 6.736 0 0 1 3.094 1.786 6.801 6.801 0 0 1 1.787 3.094c.16.59.239 1.178.239 1.768 0 .59-.08 1.182-.24 1.778a6.75 6.75 0 0 1-1.786 3.093 6.801 6.801 0 0 1-3.094 1.787 6.707 6.707 0 0 1-3.545 0A6.74 6.74 0 0 1 5.63 15.37a6.746 6.746 0 0 1-1.787-3.093zm2.937-2.055c0-.134.049-.25.148-.345a.494.494 0 0 1 .359-.143H9.23a.478.478 0 0 0 .35-.148.475.475 0 0 0 .147-.35V7.303c0-.141.048-.262.144-.363a.458.458 0 0 1 .345-.152h.562c.134 0 .25.05.35.152a.502.502 0 0 1 .147.363v1.934c0 .135.048.252.143.35a.46.46 0 0 0 .345.148h1.945c.14 0 .26.048.358.143.099.096.148.21.148.345v.562a.476.476 0 0 1-.148.35.486.486 0 0 1-.358.147h-1.945a.472.472 0 0 0-.345.143.47.47 0 0 0-.143.345v1.944c0 .14-.05.262-.148.36a.478.478 0 0 1-.35.147h-.56a.498.498 0 0 1-.489-.507V11.77a.461.461 0 0 0-.148-.345.487.487 0 0 0-.35-.143H7.287a.488.488 0 0 1-.36-.147.476.476 0 0 1-.147-.35v-.562z" fill-rule\x3d"evenodd"/\x3e\x3c/svg\x3e')},
d)));d=(0,z.O)(""+z.A(d));var e;e=z.n("Include quote image");e=(0,z.y)(""+e);a=a+z.A(z.Wm({icon:d,isPrimary:!0,ua:!0,l:"js-tweetEditor-addTextshot u-hide",action:"add-textshot",text:(0,z.O)(""+z.A(e))},c))+'\x3cdiv class\x3d"js-tweetEditor-imageContainer tweetEditor-imageContainer"\x3e';d=(0,z.O)("\x26times;");e=z.n("Remove quote image from tweet");e=(0,z.y)(""+e);return b(a+z.A(z.Sm({o:d,Ye:!0,l:"js-tweetEditor-removeTextshot tweetEditor-removeTextshot",title:(0,z.O)(""+z.A(e)),action:"remove-textshot"},
c))+'\x3cimg class\x3d"js-tweetEditor-image tweetEditor-image" data-action\x3d"toggle-expand-image"\x3e\x3c/img\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'+(c.variants.textshots_userid?'\x3cdiv class\x3d"u-textColorRed"\x3eTweet to test account @fuzzyoctopusfee\x3c/div\x3e':""))},eWa=function(){var a=z.n("An error occurred, and the tweet wasn’t posted to Twitter.");return(0,z.y)(""+a)},fWa=function(a,b,c){var d="";b=z.n("Tweet posted.");a=a.sBa;var e;e=z.n("View the tweet");e=(0,z.y)(""+
e);d+=b+" "+z.A(z.P({Eb:!0,href:a,o:(0,z.O)(""+e)},c));return(0,z.y)(d)},gWa=function(){var a=z.n("Tweet must be 140 characters or less.");return(0,z.y)(""+a)},x$=function(a,b,c){z.S.call(this);this.$d=a.get("quotes-data");var d=this.$d.En;d.subscribe("add",this.A8,this);d.subscribe("remove",this.A8,this);this.Za=b;this.xd=b.fn;this.gm=c;this.c5=[];this.Ga=a.get("app");this.Aa=a.get("popover");this.ha=a.get("route-builder");this.ZT=a.get("global-event-bus");this.Aqa=a.get("progressive-media-loader")},
iWa=function(a,b,c,d){var e=hWa(a,b);if(e){var g=a.Za.isPublished(),h=z.hma(a.Za);e.kQ=g&&h;if(c=z.qK(z.kJ(z.jJ(z.lJ(z.rK(z.mJ(a.Aa).Xa(XVa,e),"top"),c),{dP:!0,Vs:!0,Ba:!0}),"popover--quoteAttributions"),d).na())c.Ol("deactivate",function(){this.Pn===b&&y$(this,null)},a),c.io().w("quote",a.mla.bind(a,c)).w("quote-respond",a.nla.bind(a,c)).w("twitter",a.ola.bind(a))}},hWa=function(a,b){if("anon"==b.gb())return{isActive:!1,Kxa:!0};var c=z$(a,b),d=b.gd();b=b.ee();a=OVa(a.$d,c,d,b);if(!a||!a.length)return null;
a=(0,z.xb)(a,function(a){return a.user});c=(0,z.fd)(a,function(a){return a.userId!=z.xv().userId});return{isActive:(0,z.Qc)(a,function(a){return a.userId==z.xv().userId}),social:c,Oh:a.length}},jWa=function(a,b){a=a.xd.querySelectorAll('.markup--quote[name~\x3d"'+b.ei()+'"]');return z.Za(a)},z$=function(a,b){b=b.Vb()[0].name;return(b=z.dx(a.xd,b))?a.Za.di(b):null},kWa=function(a,b){var c=z.ft(b);return(c=z.aL(a.gm,c))?NVa(a.$d,b,c):null},y$=function(a,b){a.Pn!==b&&(a.Pn&&lWa(a,a.Pn,!1),b&&lWa(a,b,
!0),a.Pn=b)},lWa=function(a,b,c){jWa(a,b).map(function(a){z.id(a,"is-targeted",c)})},A$=function(a,b){(b=mWa(a,b))&&z.ZK(a.yj(),b)},mWa=function(a,b){var c=b.Vb(),d=z.dx(a.xd,c[0].getName());a=z.dx(a.xd,z.Qa(c).getName());return z.KR(d,b.gd(),a,b.ee())},B$=function(a,b,c,d){a={postId:a.Za.Ia(),quoteId:b,source:d};z.rE(c?z.$la:z.iua,a)},nWa=function(a,b){z.qH(a,z.pH,z.Rb(b,z.Jb(!0)),void 0)},oWa=function(a,b,c){z.ra(a)||(a=a.toString());var d=window,e={scrollbars:!0,mAa:!0,toolbar:!1,location:!0,width:670,
height:690};z.ub(e,c||{});e.left||e.top||(e.width=(0,window.parseInt)(e.width,10),e.height=(0,window.parseInt)(e.height,10),e.left=Math.max(d.screenX+Math.round(d.outerWidth/2-e.width/2),0),e.top=Math.max(d.screenY+Math.round(d.outerHeight/2-e.height/2),0));var g={scrollbars:"scrollbars",mAa:"resizable",toolbar:"toolbar",location:"location",width:"width",height:"height",left:"left",top:"top"};c=z.Zr(e,function(a,b,c){g[c]&&("boolean"==typeof b&&(b=b?"yes":"no"),a.push(g[c]+"\x3d"+b));return a},[]).join();
return d.open(a,b,c)},pWa=function(a){var b=z.qC(z.pna,{Eya:!0});b&&(b=b.split(/\s+/),b=b.filter(function(a){return!z.Ea(a)}),b.length&&z.dd(a,b))},qWa=function(a){if(!a)return"";var b=[],c=z.sb(["grafId","noteId","command","startIndex","endIndex"]),d;for(d in a)b[c[d]]=a[d];return b.join("-")},C$=function(a){z.FD.call(this);this.sc=a.get("dom-model-converter");this.x7={};this.r6={};this.UV={};this.qa=a;this.km=a.get("request");this.ha=a.get("route-builder");this.sa=a.get("model-store");this.Ya="";
this.Y7=0;this.Z4=!1;this.Sg=null},D$=function(a,b){var c=a.x7[b];c||(c=a.x7[b]=new z.oI,a.va("new_note_list",c,a));return c},rWa=function(a,b){if(!b)return!1;var c=b.Ca();if(a.content==c.substring(a.startIndex,a.endIndex))return!0;var d=new RegExp(z.Ha(a.content),"gi"),c=(b=d.exec(c))&&d.exec(c);return b&&!c?(c=a.endIndex-a.startIndex,a.startIndex=b.index,a.endIndex=b.index+c,a.content=b[0],!0):!1},E$=function(a,b,c){var d=b.Ia(),e=b.Sf(),g=D$(a,b.Td()),h=g?g.indexOf(b):-1,l=b.uF();b.Fw(c);"HIDDEN"==
c?a.sa.remove(b):b=z.kI(a.sa,b);var p=g?g.indexOf(b):-1;return{tk:a.km.put(a.ha.ia(z.Qra,{postId:d,noteId:e}),{state:c}),DG:function(){b.Fw(l);-1==p&&(-1==h?g.add(b):z.qI(g,b,h))}}},F$=function(a,b,c,d,e,g){var h=z.I(a.ho(c,e),"replies"),l=z.Ra(h,function(a){return a.Jv()==b}),p=h[l];"HIDDEN"==g&&z.Wa(h,l);c=a.ha.ia(z.Tra,{postId:d,noteId:c,replyId:b});a=a.km.put(c,{state:g});var r=z.Ra(h,function(a){return a.Jv()==b});return{tk:a,DG:function(){-1==r&&z.bb(h,l,0,p)}}},sWa=function(a,b,c){this.range=
a;this.anchor=b;this.Uy=b.getAttribute("name");this.highlight=c},G$=function(a,b,c){z.S.call(this);this.sL=b;this.lqa=c;this.La=a.get("screen");this.Sa=a.get("screen-request")},tWa=function(a,b){b=b.querySelectorAll(".js-trackedPostPromotion");null!=a.sL.postPageContext&&null!=a.sL.postPageContext.postId&&z.Za(b).forEach(function(b){var d=a.sL.postPageContext.postId,e=b.getAttribute("data-post-id"),g=b.getAttribute("data-post-promotion-source");b=b.getAttribute("data-location-id");z.rE(z.Kua,{hostPostId:d,
targetPostId:e,promotionSource:g,locationId:b})})},uWa=function(){},vWa=function(a){this.EK=a},H$=function(a,b){return b?z.dx(a.EK,b):null},wWa=function(a,b,c){nWa(a.EK,function(a){var e=a.getAttribute("name");e&&b.call(c,a,e)})},xWa=function(a,b){return z.Xg(a.EK,b)?a.EK:null},I$=function(a,b,c,d,e){z.y_.call(this,a,b);this.Va(new z.RZ(c));this.Va(new z.g0(!1));this.Va(new z.i0(a));this.Va(new z.z_);this.Va(new z.R0(!1,!1));this.Va(new z.l1(d,!0));this.gk=!0;this.al=d;this.km=a.get("request");this.ya=
a.get("dialog");this.wV=e;this.na()},yWa=function(){var a=z.n("Saving failed. You may be having connectivity issues or notes might be disabled on this post. Please try again.");return(0,z.y)(""+a)},zWa=function(){var a=z.n("Yikes! Something happened and we couldn’t dismiss this note.");return(0,z.y)(""+a)},AWa=function(){var a=z.n("Yikes! Something happened and we couldn’t delete this note.");return(0,z.y)(""+a)},BWa=function(){var a=z.n("Yikes! Something happened and we couldn’t delete this reply.");
return(0,z.y)(""+a)},CWa=function(){var a=z.n("The note has been dismissed.");return(0,z.y)(""+a)},DWa=function(){var a=z.n("The note has been deleted.");return(0,z.y)(""+a)},EWa=function(){var a=z.n("The reply has been deleted.");return(0,z.y)(""+a)},FWa=function(){var a=z.n("Write a note…");return(0,z.y)(""+a)},GWa=function(){var a=z.n("Cancel");return(0,z.y)(""+a)},J$=function(a,b,c,d,e){I$.call(this,a,b,e||"Leave a note",400,d||null);this.Ya=c;this.ha=a.get("route-builder");this.Se=a.get("notes-data")},
K$=function(a,b,c,d,e,g){I$.call(this,a,b,"Leave a reply…",200,d);this.ha=a.get("route-builder");this.Se=a.get("notes-data");this.Ya=c;this.w8=g||null;this.ne=e},IWa=function(a,b,c){var d='\x3cdiv class\x3d"quoteResponses js-quoteResponses"\x3e',e=a.quotes.length,g=a.responses.length||a.D2;b=a.notes.length||a.iQ;if(e||g||b){if(e){var e='\x3cdiv class\x3d"quoteResponses-section"\x3e'+z.A(z.mp({title:(0,z.O)(z.A(ZVa())+" ("+z.A(a.quotes.length)+")"),$e:!0},c)),h;h={rda:a.quotes,UBa:!0};var l='\x3cdiv class\x3d"js-quotesList"\x3e';
if(!h.UBa)var p=z.n("Learn more"),l=l+z.A(z.mp({title:(0,z.O)(""+z.A(ZVa())),$e:!0,yf:(0,z.O)(""+z.A(z.kp({href:(0,z.M)(""+z.G((0,z.gk)("https://medium.com/the-story/introducing-highlights-a4df69e8ed43"))),moreText:(0,z.O)(""+p),rb:!0},c)))},c));for(var p="list u-marginTop5 u-marginBottom15"+(h.rda.length?"":" u-hide"),p=(0,z.O)(p),l=l+('\x3cul class\x3d"'+z.E(p)+'"\x3e'),p=h.rda,r=p.length,t=0;t<r;t++){for(var x=p[t],F="",J=x.quotes,R=J.length,N=0;N<R;N++)F+=""+J[N].quoteId+(N!=R-1?",":"");F=z.D(F);
l+='\x3cli class\x3d"list-item list-item--inline u-border0" data-quote-ids\x3d"'+z.E(F)+'" data-quote-creator-id\x3d"'+z.E(x.user.userId)+'" data-action\x3d"highlight-quote" data-action-type\x3d"hover"\x3e'+z.A(z.bp(z.C({user:x.user,Oe:!0},h),c))+"\x3c/li\x3e"}h=(0,z.y)(l+"\x3c/ul\x3e\x3c/div\x3e");e=e+z.A(h)+"\x3c/div\x3e"}else e="";g?(g='\x3cdiv class\x3d"quoteResponses-section'+(a.D2?" is-withEditor":"")+'"\x3e'+z.A(z.mp({title:(0,z.O)(""+z.A(z.qo())),$e:!0},c)),a.D2&&c.supportsEdit&&c.isAuthenticated?
(h={},h=(0,z.y)('\x3cdiv class\x3d"js-inlineNewPostControl inlineNewPostControl inlineNewPostControl--quoteResponses"\x3e'+z.eT(z.C({user:c.currentUser,isCollapsed:!0,Oz:!0,type:"quoteResponses",rt:(0,z.O)(""+z.A(z.xo()))},h),c)+"\x3c/div\x3e"),h=z.A(h)):h="",g=g+h+HWa(a,0,c)+"\x3c/div\x3e"):g="";d+=e+g;if(a.Gza&&b){g=z.n("Who can see this?");d+='\x3cdiv class\x3d"quoteResponses-section quoteResponses-section--fullBleed u-paddingLeft0 u-paddingRight0"\x3e';e=b="";h=a.post.homeCollection;h=a.post.creator.userId!=
c.currentUser.userId?h?z.n("Private notes are visible to you, the author, and the editors of {$name}.",{name:z.A(h.name)}):z.n("Private notes are visible to you, the author, and the editors of any publication this story is added to."):h?z.n("Private notes are visible to you and the editors of {$name}.",{name:z.A(h.name)}):z.n("Private notes are visible to you and the editors of any publication this story is added to.");e+=h;e=(0,z.y)(e);e=""+z.A(e);e=(0,z.O)(e);b+='\x3cspan data-tooltip\x3d"'+z.E(e)+
'"\x3e'+g+"\x3c/span\x3e";g={};g=(0,z.y)(z.xl(z.C({name:"lock",size:"19px",content:(0,z.O)('\x3csvg class\x3d"svgIcon-use" width\x3d"19" height\x3d"19" viewBox\x3d"0 0 19 19" \x3e\x3cpath d\x3d"M14 14.052a1 1 0 0 1-.992.998H5.992A.99.99 0 0 1 5 14.052v-4.004a1 1 0 0 1 .992-.998h7.016a.99.99 0 0 1 .992.998v4.004zM7 5.445C7 4.187 8.114 3.15 9.5 3.15c1.385 0 2.5 1.04 2.5 2.295V8.05H7V5.445zm6.008 2.605H13V5.445c0-1.822-1.578-3.295-3.5-3.295C7.577 2.15 6 3.618 6 5.445V8.05h-.008A2 2 0 0 0 4 10.048v4.004a1.99 1.99 0 0 0 1.992 1.998h7.016A2 2 0 0 0 15 14.052v-4.004a1.99 1.99 0 0 0-1.992-1.998z" fill-rule\x3d"evenodd"/\x3e\x3c/svg\x3e')},
g)));g=(0,z.O)(""+z.A(g));e=z.n("Private notes");e=(0,z.y)(""+e);b={nBa:g,title:(0,z.O)(""+z.A(e)),$e:!0,yf:(0,z.O)(b),l:"heading--privateNotes"};b=(0,z.y)(z.ip(z.C({ah:(0,z.O)(""+z.jp(b,c)),yya:!0},b)));b=d+=z.A(b);d=""+('\x3cdiv class\x3d"privateNotes-list js-notesList'+(a.iQ?" is-showingNoteEditor":"")+(0==a.notes.length?" is-empty":"")+'"\x3e');g=a.notes;e=g.length;for(h=0;h<e;h++)d+=L$({note:g[h],post:a.post,dH:a.dH},0,c);a.iQ?(g=a.post.creator,a="",g=c.currentUser.userId==g.userId?z.n("Leave yourself a note"):
z.n("Send {$name} a private note…",{name:z.A(g.name)}),a+=g,a=(0,z.y)(a),a='\x3cdiv class\x3d"privateNotes-actions js-noteActions"\x3e'+z.A(z.Tm({action:"show-note-editor",text:(0,z.O)(""+z.A(a)),l:"privateNotes-prompt"},0,c)),g=z.y,e='\x3cdiv class\x3d"privateNotes-editor"\x3e'+z.A(z.cp({user:c.currentUser,Ue:!0},c))+'\x3cdiv class\x3d"js-noteEditor"\x3e\x3c/div\x3e\x3cdiv class\x3d"buttonSet"\x3e',h=z.n("Send"),h=(0,z.y)(""+h),c=g(e+z.A(z.Tm({action:"save-note",isPrimary:!0,l:"js-saveNoteButton",
text:(0,z.O)(""+z.A(h))},0,c))+z.A(z.Tm({action:"hide-note-editor",text:(0,z.O)(""+z.A(GWa()))},0,c))+"\x3c/div\x3e\x3c/div\x3e"),c=a+c+"\x3c/div\x3e"):c="";c=(0,z.y)(d+("\x3c/div\x3e"+c));d=b+('\x3cdiv class\x3d"quoteResponses-inner privateNotes"\x3e'+c+"\x3c/div\x3e\x3c/div\x3e")}}else 0<a.EA&&(a=z.n("Show next tip"),b=z.n("Show previous tip"),d+='\x3cdiv class\x3d"quoteResponses-section quoteResponses-section--fullBleed quoteResponses-section--tips u-textAlignCenter u-paddingLeft0 u-paddingRight0"\x3e\x3cdiv class\x3d"quoteResponses-section--tipsInner u-alignMiddle"\x3e'+
z.A(z.Wm({Db:!0,Ye:!0,ua:!0,action:"previous-highlight-tip",icon:(0,z.O)(""+z.A(z.Bl())),title:(0,z.O)(""+b)},c))+"\x3cdiv class\x3d'u-alignBlock quoteResponses-section--tipsContent u-paddingLeft20 u-paddingRight20 js-highlightTip'\x3e\x3c/div\x3e"+z.A(z.Wm({Db:!0,Ye:!0,ua:!0,action:"next-highlight-tip",icon:(0,z.O)(""+z.A(z.Cl())),title:(0,z.O)(""+a)},c))+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");return(0,z.y)(d+"\x3c/div\x3e")},HWa=function(a,b,c){return(0,z.y)(z.A(z.JT({posts:a.responses,source:"quoteResponses",
wO:!0},0,c)))},L$=function(a,b,c){var d,e=null==a.note.replies?null:a.note.replies.length,g=null==a.note.replyId,h=a.post.creator.userId==c.currentUser.userId,l=a.post.creator.userId==a.note.author.userId;d=a.note.author.userId==c.currentUser.userId;b=h||(null==a.post.homeCollection?null:a.post.homeCollection.virtuals.permissions.canEditPosts);var p=""+(g?"js-note-item"+(a.note.noteId?" js-note-"+a.note.noteId:""):"js-reply-item"+(a.note.replyId?" js-reply-"+a.note.replyId:"")),p=z.D(p),p='\x3cdiv class\x3d"privateNotes-item '+
z.E(p)+' js-note" data-note-id\x3d"'+z.E(a.note.noteId)+'"\x3e'+(g?z.A(z.bp({user:a.note.author},c)):z.A(z.$o({user:a.note.author},c)))+'\x3cdiv class\x3d"privateNotes-authorLockup"\x3e\x3cdiv class\x3d"privateNotes-author"\x3e'+z.A(z.fo({user:a.note.author},c));g||!(h||d||(null==a.post.homeCollection?0:a.post.homeCollection.virtuals.permissions.canEditPosts))||l||a.Tba?h="":(h=z.n("(Editor)"),h=(0,z.y)(""+h),h='\x3cspan class\x3d"privateNotes-author--supplemental"\x3e '+z.A(h)+"\x3c/span\x3e");p=
p+h+'\x3c/div\x3e\x3cdiv class\x3d"privateNotes-supplemental"\x3e'+z.A(z.yi(Number(a.note.createdAt),c))+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"privateNotes-content js-privateNotesContent"\x3e';h=z.A(z.Rz(String(a.note.content),c));l=String(h).replace(/(\r\n|\r|\n)/g,"\x3cbr\x3e");h=z.hh(h,z.kh)?(0,z.y)(l,z.ih(h)):l;d=""+(p+h+"\x3c/div\x3e"+(d?JWa({note:a.note,isPrimary:g},c):""));if(g){d+='\x3cdiv class\x3d"privateNotes-replies'+(e?"":" is-empty")+' js-repliesList"\x3e';if(e)for(e=a.note.replies,
g=e.length,p=0;p<g;p++)h=e[p],d+=L$({note:h,post:a.post,Tba:a.note.author.userId==h.author.userId},0,c);e=d;a.dH?(g=z.y,d='\x3cdiv class\x3d"privateNotes-editor privateNotes-editor--reply"\x3e'+z.A(z.ap({user:c.currentUser,Ue:!0},c))+'\x3cdiv class\x3d"js-replyEditor"\x3e\x3c/div\x3e\x3cdiv class\x3d"buttonSet"\x3e',p=z.n("Send"),p=(0,z.y)(""+p),g=g(d+z.A(z.Tm({action:"save-reply",isPrimary:!0,text:(0,z.O)(""+z.A(p))},0,c))+z.A(z.Tm({action:"hide-reply-editor",text:(0,z.O)(""+z.A(GWa()))},0,c))+"\x3c/div\x3e\x3c/div\x3e")):
g="";g="\x3c/div\x3e"+g+'\x3cdiv class\x3d"privateNotes-actions'+(b?" privateNotes-actions--withDismiss":"")+' u-clearfix"\x3e';a.dH?(d=z.y,p=z.n("Reply"),p=(0,z.y)(""+p),d='\x3cdiv class\x3d"u-floatLeft"\x3e'+d(z.A(z.Tm({isPrimary:!0,action:"show-reply-editor",l:"privateNotes-prompt",text:(0,z.O)(""+z.A(p))},0,c)))+"\x3c/div\x3e"):d="";d=e+(g+d+(b?'\x3cdiv class\x3d"u-floatRight"\x3e'+JWa({note:a.note,isPrimary:!0,Dba:!0},c)+"\x3c/div\x3e":"")+"\x3c/div\x3e")}return(0,z.y)(d+"\x3c/div\x3e")},JWa=
function(a,b){var c=z.y,d=a.isPrimary?a.note.noteId:a.note.replyId,e=a.Dba?"dismiss-note":a.isPrimary?"delete-note":"delete-reply";a=a.Dba?z.n("Dismiss note"):z.n("Delete");a=(0,z.y)(""+a);a=z.A(a);return c(z.A(z.Tm({actionValue:d,action:e,l:"privateNotes-delete js-deleteNote",text:(0,z.O)(""+a)},0,b)))},KWa=function(a,b,c){b="";if(0==a.q2)a=1==a.EA?z.n("People highlighted this passage. You can click on an existing highlight to add to it, like below:"):z.n("{$topQuoteCount} people highlighted this passage. You can click on an existing highlight to add to it, like below:",
{topQuoteCount:z.A(a.EA)}),b+=a,b+='\x3cimg class\x3d"quoteResponses-tipAnimation" src\x3d"'+z.E(z.Vh(z.xm({imageId:"1*SyXCciYXeNpx4-GUAuh0XQ.gif"},0,c)))+'"\x3e';else if(1==a.q2)a=z.n("Or, select any passage to create your own highlight and tell the author and others what resonated with you:"),b+=a+'\x3cimg class\x3d"quoteResponses-tipAnimation" src\x3d"'+z.E(z.Vh(z.xm({imageId:"1*dEp02HXMKtAeKxsV5MWqGg.gif"},0,c)))+'"\x3e';else if(2==a.q2){a=z.n("so that you can save your highlights and share them with others.");
var d=z.n("Sign in to create a profile");b+=z.A(z.P({Eb:!0,dc:!0,source:"highlight_tip",o:(0,z.O)(""+d),href:(0,z.M)(""+z.G(z.sk(c)))},c))+" "+a}return(0,z.y)(b)},M$=function(a,b,c,d,e,g,h,l){z.S.call(this);this.qa=a;this.ra=a.get("butter-bar");this.Za=b;this.ne=c;this.ej=e;this.$d=a.get("quotes-data");this.Se=a.get("notes-data");this.Bi=a.get("responses-data");this.Ie=g;this.wV=d;this.sW=(this.tD=h)?h.ei():null;this.pf=this.uc=null;this.hj={};this.C6=!!z.zv();this.E6=!!z.Bv();this.Xx=this.C6&&this.E6&&
z.iL(b);this.mp=null;this.QJ=0;this.B9=PVa(this.$d,this.ne);this.su=l;this.Wa(this.$t());this.B7=z.zv()?2:3},LWa=function(a){a.tb(".js-block").forEach(function(a){this.Ka(a,"mouseenter",this.Mla,this);this.Ka(a,"mouseleave",this.NX,this)},a)},MWa=function(a){a.tb(".js-note").forEach(function(a){this.Ka(a,"mouseenter",this.Kla,this);this.Ka(a,"mouseleave",this.NX,this)},a)},NWa=function(a,b){var c=a.query(".js-note-"+b);a.hj[b]||(a.hj[b]=new K$(a.qa,c.querySelector(".js-replyEditor"),a.Za.Ia(),b,a.ne),
z.JD(a,a.hj[b],"saving",a.bpa,a),z.JD(a,a.hj[b],"save",a.Woa,a),z.JD(a,a.hj[b],"fail",a.Vna,a));z.cd(c,"is-noteEditorVisible");a.hj[b].focus()},OWa=function(a,b){var c=a.hj[b];c&&(c.Ua()&&c.Nc(""),a=a.query(".js-note-"+b),z.gd(a,"is-noteEditorVisible"))},PWa=function(a,b,c){var d=H$(a.Ie,a.ne);if(d){var e=[];a.su&&(e=a.su.quotes.map(function(a){return a.ei()}));(0,z.xb)(d.querySelectorAll(".markup--quote"),function(a){var d=a.getAttribute("data-creator-ids").split(" "),d=z.Va(d,b);if(this.su)var l=
a.getAttribute("name").split(" "),d=d&&(0,z.Qc)(l,z.Va.bind(null,e));z.id(a,"is-selected",c&&d)},a)}},N$=function(a){return(a=z.$w(a,function(a){return z.bd(a,"js-note-item")}))&&a.getAttribute("data-note-id")},QWa=function(a,b,c,d){b=new z.kK(b,300);b.Wa(c);b.subscribe("dismiss",d,a);b.na();return b},O$=function(a){var b=a.Vb(),c=a.gd();a=a.ee();1<b.length&&(a=b[0].Ca().length);var d=new z.Cz;d.Jo(b[0].getName());d.$f(c);z.K(d,"endIndex",a);d.Nc(b[0].Ca().substring(c,a));return d},P$=function(a,
b){b%=a.B7;0>b&&(b=a.B7-1);a.QJ=b;(b=a.query(".js-highlightTip"))&&z.pC(b,KWa,{q2:a.QJ,EA:a.B9})},Q$=function(a,b,c,d){z.S.call(this);this.Wa(this.$t(d));this.vb=a.get("dom-monitor");this.Za=b;this.J6=!b.$a().Hs()||b.jc();this.Ya=b.Ia();this.Ie=c;this.$d=a.get("quotes-data");this.Bi=a.get("responses-data");this.Se=a.get("notes-data");this.bu=null;this.Vg={}},RWa=function(a,b){b.forEach(function(a){a&&R$(this,a)},a)},R$=function(a,b){if(!a.bu)if(H$(a.Ie,b)){var c=SWa(a,b),c=TWa(a,c),c=UWa(a,c),c=VWa(a,
c);a.Vg[b]=c;WWa(a,b)}else delete a.Vg[b]},XWa=function(a,b){if(!a.bu){var c=a.Vg[b];if(c){var d=c.length,c=UWa(a,c),c=VWa(a,c);a.Vg[b]=c;d!=c.length?WWa(a,b):c.forEach(function(a){a.Qa&&a.offsetTop&&(a.Qa.style.top=a.offsetTop+"px")})}}},YWa=function(a,b,c){return z.Sa(a.Vg[b]||[],function(a){return a.Qa==c})},SWa=function(a,b){var c=[];D$(a.Se,b).kg(function(a){var e=a.pz(),g;e?(g=this.Se.YN(e),e=g.Ta(),g=z.I(g,"endIndex")):(e=0,g=a.Ua().length);c.push({anchor:b,startIndex:e,endIndex:g,notes:[a],
quotes:[],responses:[]})},a);if(a.J6)return c;(a.$d.Rr[b]||[]).forEach(function(a){var e=ZWa(a);c.push({anchor:b,startIndex:e.startIndex,endIndex:e.endIndex,notes:[],quotes:[a],responses:[]})},a);t$(a.Bi,b).forEach(function(a){var e=r$(a);e&&(e=s$(e)&&s$(e).Fm())&&(e=ZWa(e),c.push({anchor:b,startIndex:e.startIndex,endIndex:e.endIndex,notes:[],quotes:[],responses:[a]}))},a);return c},TWa=function(a,b){var c=[];b.sort(function(a,b){return a.startIndex-b.startIndex});b.forEach(function(a){var b=z.Ra(c,
function(b){return b.endIndex>=a.startIndex-1&&b.startIndex<=a.endIndex+1});0<=b?this.WC(c[b],a):c.push(a)},a);return c},VWa=function(a,b){var c=[];b.forEach(function(a){if(a.offsetTop){var b=z.Ra(c,function(b){return 30>=Math.abs(b.offsetTop-a.offsetTop)});0<=b?this.WC(c[b],a):c.push(a)}},a);return c},WWa=function(a,b){a.tb(".js-paragraphControl-"+b).forEach(z.Rg);a.Vg[b]=a.Vg[b].map(function(a){var b=$Wa(this,a),b=z.rC(aXa,b);b.style.top=a.offsetTop+"px";a.Qa=b;this.ma().appendChild(a.Qa);z.cd(b,
"is-visible");return a},a)},$Wa=function(a,b){var c=b.notes,d=b.responses,e=n$(a.$d,b.quotes),g=d?d.length:0,h=c?c.length:0,l=0,p=0,r=0,t=!1,x=!1,F={},J={},R=z.xv().userId,N=a.Za.$a().We().gb();c.forEach(function(a){var b=a.fF();b&&((a=z.I(a,"replies"))&&a.forEach(function(a){h++;a.author&&(a.author.userId==R&&l++,a.author.social&&a.author.social.isFollowing&&(F[a.author.userId]=a.author),J[a.author.userId]=!0)}),J[b.userId]=!0,b.userId==R&&l++,b.userId==N?p++:r++,b.social&&b.social.isFollowing&&
(F[b.userId]=b))});e.forEach(function(a){a=a.user;J[a.userId]=!0;a.userId==R&&(t=!0);a.social&&a.social.isFollowing&&(F[a.userId]=a)});d.forEach(function(a){a=a.We();J[a.userId]=!0;a.userId==R&&(x=!0);a.social&&a.social.isFollowing&&(F[a.userId]=a)});c=b.quotes.filter(function(a){return"anon"==a.gb()});return{postId:a.Ya,Uy:b.anchor,Eza:h,nAa:g,tw:x,jw:l,Oca:p,Fza:r,fQa:e.length,qw:t,uba:Object.keys(J).length,Axa:z.lb(F),EA:c.length}},ZWa=function(a){var b=a.gd(),c=a.ee();1<a.paragraphs.length&&(c=
a.paragraphs[0].text.length);return{startIndex:b,endIndex:c}},UWa=function(a,b){var c=z.QC();return b.map(function(a){var b=this.Ie.get(a.anchor),g=this.Za.di(b);if(!g)return a;var h;4==g.type&&(g.Ca()&&(h=b.querySelector("figcaption")),h||(h=b));if(!h){g=a.startIndex+1;b=[b];h=0;for(var l=null;0<b.length&&h<g;)if(l=b.pop(),!(l.nodeName in z.Sya))if(3==l.nodeType){var p=l.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");h+=p.length}else if(l.nodeName in z.xU)h+=z.xU[l.nodeName].length;else for(p=
l.childNodes.length-1;0<=p;p--)b.push(l.childNodes[p]);h=l}g=z.UC(h,!0);a.offsetTop=Math.round(g.top+c.top);return a},a)},aXa=function(a,b,c){b=z.y;var d='\x3cdiv class\x3d"paragraphControls js-paragraphControl js-paragraphControl-'+z.E(a.Uy)+' u-noUserSelect"\x3e',e=z.y,g;if(a.Eza||a.nAa){g='\x3cdiv class\x3d"notesMarker u-noUserSelect" data-action\x3d"select-anchor" data-action-value\x3d"'+z.E(a.Uy)+'"\x3e';var h;h={};h=(0,z.y)(z.xl(z.C({name:"asteriskFilled",size:"19px",content:(0,z.O)('\x3csvg class\x3d"svgIcon-use" width\x3d"19" height\x3d"19" viewBox\x3d"0 0 19 19" \x3e\x3cpath d\x3d"M14.78 8.07a8.681 8.681 0 0 0-.427-1.383.478.478 0 0 0-.584-.27l-3.12.77V4.034c0-.247-.19-.48-.43-.5a7.23 7.23 0 0 0-1.38 0c-.24.02-.43.253-.43.5V7.19L5.3 6.415a.48.48 0 0 0-.583.27c-.18.448-.324.91-.426 1.383-.05.24.1.5.32.58l3.06.754-1.98 2.956c-.14.196-.13.502.04.67.34.332.7.632 1.09.896.2.136.49.077.63-.117l2.09-3.114 2.09 3.112c.15.193.43.252.63.116.39-.26.75-.56 1.09-.89.17-.17.19-.47.04-.67L11.4 9.41l3.06-.76a.517.517 0 0 0 .32-.58" fill-rule\x3d"evenodd"/\x3e\x3c/svg\x3e')},
h)));g=g+z.A(h)+"\x3c/div\x3e"}else g="";var l=h="",p="",r=1==a.jw?z.n("a note"):z.n("notes"),p=p+(""+r),p=z.D(p);1==a.uba&&(0<a.jw||a.qw||a.tw)&&(0<a.jw&&a.qw&&a.tw?(p=z.n("highlighted, responded, and left {$noteCountText}",{noteCountText:""+p}),l+=" "+p):0<a.jw&&a.tw?(p=z.n("responded and left {$noteCountText}",{noteCountText:""+p}),l+=" "+p):0<a.jw&&a.qw?(p=z.n("highlighted and left {$noteCountText}",{noteCountText:""+p}),l+=" "+p):a.qw&&a.tw?(p=z.n("highlighted and responded"),l+=" "+p):a.qw?
(p=z.n("highlighted"),l+=" "+p):0<a.jw?(p=z.n("left {$noteCountText}",{noteCountText:""+p}),l+=" "+p):a.tw&&(p=z.n("responded"),l+=" "+p));l=z.D(l);h+='\x3cspan class\x3d"paragraphControls-itemText"\x3e';p="";if(0<a.Oca&&0==a.Fza&&!a.qw&&!a.tw)c=1==a.Oca?z.n("Note to self"):z.n("Notes to self"),p+=c;else{r="";if(0<a.EA)var t=z.n("Top highlight"),r=r+t;p+=z.A(z.zT(z.C({social:a.Axa,isActive:0<a.jw||a.qw||a.tw,Oh:a.uba,S_:!0,Oza:!0,W$:(0,z.O)(r)},a),c));p+=z.A(l)}p=(0,z.O)(p);h+=z.A(z.gxa(z.C({text:p},
a)))+"\x3c/span\x3e";a=(0,z.y)(h);a=e(g+a);return b(d+a+"\x3c/div\x3e")},S$=function(a,b,c){z.S.call(this);this.qa=a;this.tka=a.get("floating-components");this.La=a.get("screen");this.kb=a.get("screen-service");this.tE=a.get("uri-fragment");this.vb=a.get("dom-monitor");this.Za=b;this.xd=b.xd;this.fn=this.xd.querySelector(".js-postField");this.S7=this.La.ma().querySelector(".js-notesPositionContainer");this.$d=a.get("quotes-data");this.Se=a.get("notes-data");this.Se.subscribe("new_note_list",this.soa,
this);this.Bi=a.get("responses-data");this.Tk=null;this.Ie=new vWa(this.xd.querySelector(".js-notesSource"));this.RC=this.Vg=this.xL=null;this.Vg=new Q$(a,b,this.Ie,this.S7);this.track(this.Vg);this.RC=this.Vg.ma();this.Rh=this.eV=null;this.oe=c},U$=function(a,b){if(a.isActive()){var c=(b=b||a.eV)&&b.rO,d=b&&b.noteId;c&&(a.Pu(c),d&&a.Se.ho(d,c)&&a.Rh&&z.u(a.Rh,function(){T$(this,c,null,d)},a));z.qga(a.tE.Ga,"")}else a.eV=b||null},T$=function(a,b,c,d,e,g){var h={Cj:!0,M_:767>=window.innerWidth};a.zW();
c=new M$(a.qa,a.Za,b,d||"",c||null,a.Ie,e||null,g||null);c.subscribe("set-active-highlight",a.H8,a);c.subscribe("reset-highlight",a.ura,a);c.subscribe("close",a.zW,a);b=g&&g.Qa?g.Qa:a.Ie.get(b);g=z.Pna(a.tka);g.qm=b;b=g.HA(c);b.iE=h;h=b.PQ(a.jm.bind(a));h.qL=!0;a.Tk=h.na()},bXa=function(a,b,c){var d=a.Za.di(H$(a.Ie,b));if(d&&4!=d.type){z.Rx(d,4);if(c){if(!rWa(c,d))return;z.Px(d,z.wx(c.startIndex,c.endIndex,c.id))}c=a.Za.jc();var e=a.Za.$a();c={mode:c?"edit":"view",Oi:z.iy(e),media:null,Hk:null,sections:!0,
Fj:!1,Bj:!1,qk:!1,rf:!1,postId:e.id};a.Ie.get(b).innerHTML=z.oz(d,z.Lr,c)}},cXa=function(a,b){var c=z.et();if(!c||c.isCollapsed())if(b&&(c=b),!c||c.isCollapsed())return null;b=c.Jg();var d=xWa(a.Ie,b);if(!d)return null;a=(b=z.$w(b,z.pH,d))&&a.Za.di(b);if(!b)return null;var d=z.WC(c,b,!0),e=z.WC(c,b,!1);return-1==d||-1==e?null:new sWa(c,b,new z.Cz({anchor:b.getAttribute("name"),startIndex:d,endIndex:e,content:a.Ca().substring(d,e)}))},dXa=function(){},eXa=function(a,b,c){var d;b=(a.post.creator.userId==
c.currentUser.userId||(null==a.post.homeCollection?null:null==a.post.homeCollection.virtuals?null:null==a.post.homeCollection.virtuals.permissions?null:a.post.homeCollection.virtuals.permissions.canManageAll))&&a.post.virtuals.responsesCreatedCount>=c.j.Bda;d=""+('\x3cdiv class\x3d"container u-maxWidth740"\x3e\x3cdiv class\x3d"responsesStreamWrapper u-maxWidth640 u-hide js-responsesStreamWrapper"\x3e\x3cdiv class\x3d"container u-maxWidth640 responsesStream-title u-paddingTop15"\x3e\x3cdiv class\x3d"row"\x3e'+
z.A(z.lp({title:(0,z.O)(""+z.A(z.qo())),Qz:!0,yf:(0,z.O)(""+(c.supportsEdit?b?z.A(z.Sm({Me:!0,action:"show-responses-stream-editor",l:"js-showResponsesStreamEditorButton",o:(0,z.O)(""+z.A(z.qxa()))},c)):"":""))},c))+"\x3c/div\x3e\x3c/div\x3e");if(c.supportsEdit){var e;e=z.y;var g;c.isAuthenticated?g=z.A(z.Kxa({rt:(0,z.O)(""+(a.post.virtuals.responsesCreatedCount?z.A(z.aV()):z.A(z.LAa())))},c)):(g=a||{},g=""+('\x3cdiv class\x3d"'+z.E(z.D("u-paddingTop30 u-paddingBottom30 u-paddingLeft0 u-paddingRight0 u-borderBottomLightest js-responsesLoggedOutPrompt"))+
'"\x3e'+z.A(z.Wm({icon:(0,z.O)(""+z.A(z.pm())),ua:!0,jh:!0,dc:!0,Rd:(0,z.M)(""+z.G(z.lk(z.C({WP:!0},g),0,c))),text:(0,z.O)(""+z.A(z.aV())),l:"button--loggedOutPrompt",source:"logged_out_response_prompt"},c))+"\x3c/div\x3e"),g=(0,z.y)(g));e=e(g);d+='\x3cdiv class\x3d"container u-maxWidth640 u-marginBottom30 responsesStream-editor cardChromeless'+(b?" u-hide":"")+' js-responsesStreamEditor"\x3e\x3cdiv class\x3d"row"\x3e\x3cdiv class\x3d"col u-size12of12"\x3e'+e+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"}b&&
(b=d,d='\x3cdiv class\x3d"'+z.E(z.D("container u-maxWidth640 u-clearfix u-paddingTop25 u-paddingBottom25 u-fontSize14 u-textColorNormal streamItem-card streamItem-card--hPadding20 streamItem-card--borderRadius3 cardChromeless js-responseManagementCard"))+'"\x3e\x3cdiv class\x3d"u-size8of12"\x3e'+z.A(z.QAa({l:"responsesIcon u-accentColor--iconLight u-verticalAlignMiddle u-marginRight10"})),g=a.post.virtuals.responsesCreatedCount,e="",g=1==g?z.n("{$startBold}{$count}{$endBold} response to your story",
{startBold:"\x3cb\x3e",count:z.A(g),endBold:"\x3c/b\x3e"}):z.n("{$startBold}{$count}{$endBold} responses to your story",{startBold:"\x3cb\x3e",count:z.A(g),endBold:"\x3c/b\x3e"}),e+=g,e=(0,z.y)(e),d=d+z.A(e)+'\x3c/div\x3e\x3cdiv class\x3d"u-size4of12"\x3e\x3cspan class\x3d"u-floatRight u-marginTop4 u-marginLeft10"\x3e',a=(0,z.M)(""+z.G(z.kV(a,c))),e=z.n("Manage responses"),e=(0,z.y)(""+e),d=b+(d+z.A(z.P({href:a,o:(0,z.O)(""+z.A(e)),l:"link--accent u-accentColor--textNormal u-accentColor--textDarken"},
c))+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e"));a=d;b='\x3cdiv class\x3d"container u-maxWidth640 u-marginBottom30 u-borderTopLighter u-hide js-noOtherResponses"\x3e\x3cdiv class\x3d"row"\x3e\x3cdiv class\x3d"col u-size12of12"\x3e\x3cdiv class\x3d"u-paddingTop20 u-paddingBottom25"\x3e\x3cdiv class\x3d"u-inlineBlock u-verticalAlignTop u-paddingRight10"\x3e'+z.A(z.gp({Ef:!0,Ue:!0},c))+'\x3c/div\x3e\x3cdiv class\x3d"u-inlineBlock"\x3e\x3cdiv class\x3d"u-lineHeight36 u-textColorNormal u-contentSerifRegular"\x3e';
d=z.n("No responses yet");d=(0,z.y)(""+d);b=b+z.A(d)+'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"responsesStream js-responsesStream"\x3e\x3c/div\x3e\x3cdiv class\x3d"container u-maxWidth640 u-hide js-showOtherResponses"\x3e\x3cdiv class\x3d"row"\x3e';d=z.n("Show all responses");d=(0,z.y)(""+d);d=a+(b+z.A(z.Sm({action:"show-other-responses",o:(0,z.O)(""+z.A(d)),isPrimary:!0,l:"responsesStream-showOtherResponses cardChromeless u-sizeFullWidth"},c))+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"responsesStream js-responsesStreamOther"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');
return(0,z.y)(d)},V$=function(a){z.S.call(this);this.Sa=a.get("screen-request");this.wa=null;this.YX=a.get("screen-view-state");this.qa=a;this.V8=this.dX=!1;this.QV=this.uc=null},W$=function(a){z.FD.call(this);this.Qw=a},fXa=function(a,b,c){a=z.ra(a)?new z.Gd(a):a;(a=oWa(a,b,c||{}))&&(new W$(a)).focus()},X$=function(a){this.ka=a.get("request");this.tE=a.get("uri-fragment");this.ha=a.get("route-builder")},gXa=function(a,b){b=new z.kk(b.authBaseUrl);return new z.Gd(b.sm(a))},hXa=function(a,b,c){b.content=
b.content.replace(/“/g,"‘").replace(/”/g,"’").replace(/„/g,"‚").replace(/'/g,"’");var d=String(a(b,null,c)),e=Y$(d)-140;0<e&&(b.content=z.Ci(b.content,b.content.length-e),d=String(a(b,null,c)));return d},Y$=function(a){var b=a.length;a=a.match(iXa);if(!a)return b;for(var c=0;c<a.length;c++)b+=23-a[c].length;return b},Z$=function(a){z.Pr.call(this);this.qa=a;this.RB=a.get("dialog");this.ka=a.get("request");this.ha=a.get("route-builder");this.ra=a.get("butter-bar");this.pE=this.ya=this.av=this.wa=null;
this.WJ=!1},kXa=function(a){var b=a.ya.query(".js-tweetEditor-image"),c=a.ya.query(".js-tweetEditor-imageContainer"),d=a.ya.query(".js-tweetEditor-imageStatus");z.cd(c,"u-hide");var e=jXa(a);e.base64=!0;z.v(z.u(a.ka.post(z.qC(aWa),e,{Vy:!1,withCredentials:!1}),function(a){b.src="data:image/png;base64,"+a;z.gd(c,"u-hide");z.cd(d,"u-hide");this.WJ=!0},a),function(a){z.yD(a);z.pC(d,cWa)},a)},lXa=function(a,b){return 140>=Y$(b)?!0:(b=a.ya.query(".js-tweetEditor-text"),(new z.XD(b,{name:"shimmy-shake",
duration:400})).start(),a=a.ya.query(".js-tweetEditor-error"),z.pC(a,gWa),!1)},jXa=function(a){var b=a.wa,c=a.av.lBa;a=a.av.kBa;var d=b.creator,e=b.approvedHomeCollection,g=z.Lr,h=null;e&&(h=e.image);var l=null;e&&e.logo&&e.logo.imageId&&(l=e.logo.imageId);var p=null;e&&e.tintColor&&2==e.colorBehavior&&e.logo&&e.logo.imageId&&(p=e.tintColor);var r=null;e&&e.tintColor&&(r=z.Fya(e.tintColor),r=z.Qw(r,.6).color);return new w$({content:c,altText:a,title:b.title,author:d&&d.name,date:z.xi(b.createdAt,
g),authorAvatarId:d&&d.imageId,collection:e&&e.name,collectionAvatarId:h?h.imageId:null,collectionLogoId:l,collectionBackgroundColor:p,collectionHighlightColor:r,version:2})},$$=function(a){this.ka=a.get("request");this.tE=a.get("uri-fragment");this.ha=a.get("route-builder");this.qa=a};z.m(o$,z.le);o$.prototype.wj=function(a){var b={};z.RJ(this,b,a.ac(),"");return b};
o$.prototype.Gb=function(a,b){if(!a||!b)return null;var c=new a;Object.keys(b).forEach(function(a){for(var e=a.split(/[[\]]+/).filter(function(a){return!!a}),g=c,h=e.shift();h;){var l=z.oj(g,h);if(!l)break;var p=l.g();if(l.oa()){var r=z.ij(g,h)||[],t=e.shift(),x=Number(t);if(void 0===t||!Number.isInteger(x)||0>x)break;if(p.prototype instanceof z.cj)l=r[x],l||(l=new p,r[x]=l),z.K(g,h,r),g=l;else{if(void 0!==e.shift())break;p=IVa(b[a],l);r[x]=p;z.K(g,h,r)}}else if(p.prototype instanceof z.cj)r=z.ij(g,
h),r||(r=new p,z.K(g,h,r)),g=r;else{if(void 0!==e.shift())break;p=IVa(b[a],l);z.K(g,h,p)}h=e.shift()}});return c};z.q(p$,z.uj);z.f=p$.prototype;z.f.aa=function(){return""};z.f.ba=function(){return""};z.f.hO=z.k(595);z.f.ea=function(){return p$.prototype};z.f.ca={name:"PlacementsResponse",fa:!1,fields:{placements:{name:"placements",g:function(){return z.oR},oa:z.U,h:1}},ga:{}};z.q(q$,z.L);q$.prototype.aa=function(){return""};q$.prototype.ba=function(){return""};q$.prototype.ea=function(){return q$.prototype};
q$.prototype.ca={name:"PlacementsRequestQuery",fa:!1,fields:{requestContext:{name:"requestContext",g:function(){return z.HI},h:1},slots:{name:"slots",g:function(){return z.JI},oa:z.U,h:2}},ga:{}};z.y_.prototype.bQ=z.Y(610,function(a){a!=this.eK&&this.mb&&(this.mb.oh.contentEditable=a);this.eK=a});z.ML.prototype.OZ=z.Y(602,function(a){a=r$(a);if(!a)return null;a=s$(a)&&s$(a).Fm();return a?(a=a.Vb())&&a.length?a[0].getName():null:null});z.pK.prototype.PQ=z.Y(601,function(a){this.jm=a;return this});
z.ZL.prototype.PQ=z.Y(600,function(a){this.jm=a;return this});p$.prototype.hO=z.Y(595,function(){return z.I(this,"placements")});z.SJ.prototype.hO=z.Y(594,function(a,b){var c=this;a=KVa(LVa(new q$,a),b);a=(new o$).wj(a);var d=this.ha.ia(z.cpa,{},a);return z.TJ(this,d,function(){return z.u(c.ka.get(d,{background:!0}),function(a){a=c.za.Fb(p$,a);c.sa.Jb(a);return a})})});z.bE.prototype.ho=z.Y(457,function(){return z.I(this,"note")});z.OJ.prototype.ho=z.Y(456,function(a){return this.kc("Note",a)});
z.Az.prototype.Jv=z.Y(455,function(){return z.I(this,"replyId")});z.bE.prototype.Jv=z.Y(454,function(){return z.I(this,"replyId")});z.yz.prototype.Aw=z.Y(453,function(a){return z.K(this,"highlight",a)});z.yz.prototype.YN=z.Y(452,function(){return z.I(this,"highlight")});z.yz.prototype.wt=z.Y(451,function(a){return z.K(this,"author",a)});z.Az.prototype.wt=z.Y(450,function(a){return z.K(this,"author",a)});z.yz.prototype.fF=z.Y(449,function(){return z.I(this,"author")});
z.Az.prototype.fF=z.Y(448,function(){return z.I(this,"author")});z.yz.prototype.pz=z.Y(447,function(){return z.I(this,"highlightId")});z.yz.prototype.oA=z.Y(446,function(a){return z.K(this,"authorId",a)});z.Az.prototype.oA=z.Y(445,function(a){return z.K(this,"authorId",a)});z.yz.prototype.Fw=z.Y(444,function(a){return z.K(this,"state",a)});z.Az.prototype.Fw=z.Y(443,function(a){return z.K(this,"state",a)});z.eE.prototype.Fw=z.Y(442,function(a){return z.K(this,"state",a)});
z.yz.prototype.Sf=z.Y(441,function(){return z.I(this,"noteId")});z.Az.prototype.Sf=z.Y(440,function(){return z.I(this,"noteId")});z.bE.prototype.Sf=z.Y(439,function(){return z.I(this,"noteId")});z.nv.prototype.Dd=z.Y(356,function(){return z.I(this,"catalogId")});z.lP.prototype.Dd=z.Y(355,function(){return z.I(this,"catalogId")});z.eP.prototype.Dd=z.Y(354,function(){return z.I(this,"catalogId")});z.cP.prototype.Dd=z.Y(353,function(){return z.I(this,"catalogId")});
z.MQ.prototype.Dd=z.Y(352,function(){return z.I(this,"catalogId")});z.FQ.prototype.Dd=z.Y(351,function(){return z.I(this,"catalogId")});z.JO.prototype.Dd=z.Y(350,function(){return z.I(this,"catalogId")});z.vQ.prototype.Dd=z.Y(349,function(){return z.I(this,"catalogId")});z.zP.prototype.Dd=z.Y(348,function(){return z.I(this,"catalogId")});z.nQ.prototype.Dd=z.Y(347,function(){return z.I(this,"catalogId")});z.mQ.prototype.Dd=z.Y(346,function(){return z.I(this,"catalogId")});
z.lQ.prototype.Dd=z.Y(345,function(){return z.I(this,"catalogId")});z.hw.prototype.Dd=z.Y(344,function(){return z.I(this,"catalogId")});z.bE.prototype.Dd=z.Y(343,function(){return z.I(this,"catalogId")});z.dR.prototype.Dd=z.Y(342,function(){return z.I(this,"catalogId")});z.XM.prototype.Dd=z.Y(341,function(){return z.I(this,"catalogId")});z.Wt.prototype.iO=z.Y(84,function(){return z.I(this,"point")});z.zj.prototype.Em=z.Y(21,function(){return z.I(this,"offset")});z.QK.prototype.Em=z.Y(20,function(){return this.GK});
u$.prototype.iO=function(){var a=window.document.body;return z.Xg(a,this.vh.node)?this.vh:this.Rj&&z.Xg(a,this.Rj)?z.DR(this.GK,this.Rj):this.ne&&(a=z.dx(this.pka,this.ne))?z.DR(this.GK,a):null};z.q(v$,z.ds);v$.prototype.zG=function(){if(!this.lj)return null;var a=this.lj.iO();if(!a)return null;var b=this.Wk.iO();return b?z.Ls(a.node,a.offset,b.node,b.offset):null};z.q(w$,z.L);z.f=w$.prototype;z.f.aa=function(){return""};z.f.ba=function(){return""};z.f.Ua=function(){return z.I(this,"content")};
z.f.Nc=function(a){return z.K(this,"content",a)};z.f.Ib=function(){return z.I(this,"title")};z.f.Vc=function(a){return z.K(this,"title",a)};z.f.fF=function(){return z.I(this,"author")};z.f.wt=function(a){return z.K(this,"author",a)};z.f.getDate=function(){return z.I(this,"date")};z.f.setDate=function(a){return z.K(this,"date",a)};z.f.ub=function(){return z.I(this,"collection")};z.f.setVersion=function(a){return z.K(this,"version",a)};z.f.U1=function(a){return z.K(this,"template",a)};
z.f.kf=function(){return z.I(this,"subtitle")};z.f.oi=function(a){return z.K(this,"subtitle",a)};z.f.ea=function(){return w$.prototype};
z.f.ca={name:"TextshotInfo",fa:!1,fields:{content:{name:"content",g:z.V,h:1},altText:{name:"altText",g:z.V,h:2},title:{name:"title",g:z.V,h:3},author:{name:"author",g:z.V,h:4},date:{name:"date",g:z.V,h:5},authorAvatarId:{name:"authorAvatarId",g:z.V,h:6},collection:{name:"collection",g:z.V,h:7},collectionAvatarId:{name:"collectionAvatarId",g:z.V,h:8},collectionLogoId:{name:"collectionLogoId",g:z.V,h:9},collectionBackgroundColor:{name:"collectionBackgroundColor",g:z.V,h:10},collectionHighlightColor:{name:"collectionHighlightColor",
g:z.V,h:11},version:{name:"version",g:z.X,h:12},base64:{name:"base64",g:z.eN,h:13},template:{name:"template",g:z.V,h:14},mainStat:{name:"mainStat",g:z.V,h:15},mainStatTitle:{name:"mainStatTitle",g:z.V,h:16},subtitle:{name:"subtitle",g:z.V,h:17},icon:{name:"icon",g:z.V,h:18},imgKey:{name:"imgKey",g:z.V,h:19}},ga:{}};z.q(x$,z.S);z.f=x$.prototype;z.f.yj=function(){return this.gm.yj()};
z.f.la=function(){x$.pa.la.call(this);z.JD(this,this.ZT,"data-redirect-type-quote",this.Dna,this);this.Ka(this.xd,"click",this.ju,this);z.jL(this.Za)&&z.uC()&&this.Ka(this.xd,"mouseover",this.fla,this);this.Za.$a().Hs()&&!this.Za.jc()&&z.v(this.$d.load(this.Za.Ia()),z.yD);var a=this.yj();a&&(z.JD(this,a,"quote",this.ala,this),z.JD(this,a,"quote-respond",this.bla,this),z.JD(this,a,"show",this.OX,this),z.JD(this,a,"hide",this.Wna,this))};
z.f.Dna=function(a){var b=z.aL(this.gm,this.yj().Xu);b&&(a.url=new z.Gd(this.ha.ia(z.Wra,{postId:this.Za.Ia()},{paragraphs:JSON.stringify([b.Rv.Gb().ac()]),startOffset:b.start,endOffset:b.end})))};z.f.ju=function(a){z.$w(a.target,function(a){if(a===this.xd)return!0;var c=z.yH(a);if(3==c)return!0;if(7==c){if(c=kWa(this,a))if(y$(this,c),z.uC())A$(this,c);else{var d=new z.RI;iWa(this,c,a,d)}return!0}return!1}.bind(this))};
z.f.fla=function(a){z.$w(a.target,function(a){if(a===this.xd)return!0;var c=z.yH(a);if(3==c)return!0;if(7==c){c=z.et();if(!(c&&!c.isCollapsed()||this.yj()&&this.yj().Kl())&&(c=kWa(this,a))){var d=this.xd.querySelector('.markup--quote[name~\x3d"'+c.ei()+'"]');a=new z.kK(a,100);iWa(this,c,d,a);y$(this,c)}return!0}return!1}.bind(this))};
z.f.OX=function(){var a=z.et();a&&!a.isCollapsed()&&y$(this,null);z.jL(this.Za)&&(a=z.aL(this.gm,this.yj().Xu))&&(a=z.Rla(this.$d,a.Rv,a.start,a.end),z.id(this.yj().Oa().querySelector(".js-highlightMenuQuoteButton"),"is-active",!!a))};z.f.Wna=function(){this.Pn&&y$(this,null)};
z.f.ala=function(){if(z.jL(this.Za)){var a=z.WK(this.yj());if(a){var b=a.range,c=a.Rya,d=z.bd(this.yj().Oa().querySelector(".js-highlightMenuQuoteButton"),"is-active"),a=z.aL(this.gm,b);z.v(z.u(this.$d.toggle(a.Rv,a.start,a.end,!c),function(a){z.Jya();d?z.YK(this.yj()):A$(this,a);var b=c?"selection_menu":"quote_click_menu";B$(this,a.ei(),!d,b)},this),z.yD)}}};
z.f.bla=function(){if(z.jL(this.Za)&&z.Lr.supportsEdit){var a=z.WK(this.yj());if(a){var b=z.aL(this.gm,a.range);z.v(z.u(this.$d.create(b.Rv,b.start,b.end,1,!0),function(a){B$(this,a.ei(),!0,"selection_menu_quote_respond");this.va("quote-respond",a,b.Rv.name)},this),z.yD)}}};
z.f.mla=function(a){var b=this.Pn,c=z$(this,b),d=b.gd(),e=b.ee(),b=a.query(".js-quoteAttributions-pileOn"),g=z.bd(b,"is-active");z.v(z.u(this.$d.toggle(c,d,e,!0),function(b){var l=a.query(".js-quoteAttributions-pileOn");z.kd(l,"is-active");if(l=z.SK(this.$d,c,d,e)){var p=hWa(this,l),r=a.query(".js-quoteAttributions-info");z.pC(r,VVa,p)}else a.Cc();!g&&z.uC()&&(a.Cc(),A$(this,l));l=z.uC()?"quote_hover":"quote_click_mobile";B$(this,b.ei(),!g,l)},this),z.yD)};
z.f.nla=function(){if(z.jL(this.Za)&&z.Lr.supportsEdit){var a=z$(this,this.Pn),b=this.Pn.gd(),c=this.Pn.ee();z.v(z.u(this.$d.create(a,b,c,1,!0),function(b){B$(this,b.ei(),!0,"quote_respond");this.va("quote-respond",b,a.name)},this),z.yD)}};z.f.ola=function(){var a=mWa(this,this.Pn);a&&z.ama(this.gm,a)};
z.f.A8=function(){var a=new v$(this.xd),b=this.$d.Rr,c=Object.keys(b).concat(this.c5);z.cb(c);c.forEach(function(a){var c=b[a]||[],g=this.Za;if(g=(a=g.xd&&z.dx(g.xd,a))&&this.Za.di(a))UVa(g,c),a.innerHTML=z.oz(g,z.Lr,z.gma(this.Za)),z.Yna(this.Aqa,a)},this);this.c5=Object.keys(b);(a=a.restore())&&a.select()};z.q(C$,z.FD);z.f=C$.prototype;
z.f.load=function(a){if(!z.zv())return z.Vc([]);this.Ya=a;this.Sg||(this.Sg=z.v(z.u(this.km.get(this.ha.ia(z.Ora,{postId:a}),{background:!0}),this.yqa,this),z.yD));return this.Sg.Ic()};z.f.Ao=function(){return this.Z4};z.f.Al=function(){return this.Y7};z.f.YN=function(a){return this.r6[a]||null};z.f.ho=function(a,b){return z.hS(D$(this,b),a)};z.f.Aw=function(a,b){this.r6[a]=b};z.f.Ia=function(){return this.Ya};
z.f.yqa=function(a){var b=a.references.User;this.Y7=a.post.visibility;var c=a.value;if(c)for(var d=0;d<c.length;d++){var e=c[d];if("HIDDEN"!=e.state){var g=e.replies,h=b;if(g)for(var l=0;l<g.length;l++){var p=g[l],r=p.authorId||null;p.author=r&&h[r]||null}g=e.anchor;h=e.authorId||null;e.author=h&&b[h]||null;g=D$(this,g);e=z.zz(e);g.add(z.kI(this.sa,e))}}if(a=a.highlights)for(b=0;b<a.length;b++)this.Aw(a[b].id,z.Pt.Gb(z.Cz,a[b]));this.Z4=!0};z.m(G$,z.S);G$.prototype.la=function(){var a=this;z.S.prototype.la.call(this);z.u(this.Sa.hO(this.sL,this.lqa),function(b){b.placements&&b.placements.forEach(a.Vla,a)})};
G$.prototype.Vla=function(a){if(this.isActive()){var b=null;switch(a.location){case 1:b=this.La.query(".js-postFooterPlacements");if(!b)break;z.pC(b,z.QT,{items:a.items,context:9});z.T(b).w("show-more-recommendations",this.Rsa,this);break;case 2:b=this.La.query(".js-readNextMetabarRight");if(!b)break;z.pC(b,z.QT,{items:a.items,context:2});break;case 6:(b=this.La.query(".js-postPromotionWrapper"))&&z.pC(b,z.QT,{items:a.items,context:2})}b&&tWa(this,b)}};
G$.prototype.Rsa=function(a){z.rE(z.nva,{});var b=this.La.query(".js-moreRecommendations");b&&(z.gx(b),z.fx(a.target))};uWa.prototype.kN=function(a,b,c){return new x$(a,b,c)};vWa.prototype.get=function(a){return H$(this,a)};z.q(I$,z.y_);z.f=I$.prototype;z.f.PD=!1;z.f.Tx="";z.f.QD=0;z.f.Hl=z.U;z.f.Sf=function(){return this.wV};z.f.save=function(){this.Ua().length<=this.al&&this.jk()};z.f.sb=function(){(0,window.clearTimeout)(this.QD);I$.pa.sb.call(this)};
z.f.la=function(){function a(a){a.stopPropagation()}I$.pa.la.call(this);this.Tx=this.Ua();this.Nc(this.Tx);this.iv(13,this.AV,this);this.iv(27,this.DV,this);this.mb.Ka("blur",this.zV,!1,this);var b=this.mb.Oa();z.IC(b,"keydown",a);z.IC(b,"keyup",a);z.IC(b,"keypress",a)};z.f.$0=function(a){return a};
z.f.jk=function(){if(this.isEnabled()){var a=this.Ua().trim();if(a){this.bQ(!1);var b=this.Paa(),a=this.Oaa(a);this.va("saving",a);z.Mc(z.v(z.u(this.km.post(b,a.ac()),this.woa,this),this.uoa.bind(this,a)),this.bQ.bind(this,!0))}}};z.f.woa=function(a){this.va("save",this.$0(a.value))};z.f.uoa=function(a,b){this.va("fail",a);this.ya.error(yWa());z.yD(b)};z.f.AV=function(a){if(this.as&&z.m0(this.as))return!1;a.shiftKey||(a.preventDefault(),this.save());return!0};
z.f.DV=function(a){if(this.as&&z.m0(this.as))return!1;a.preventDefault();this.Nc(this.Tx);this.va("cancel");return!1};z.f.zV=function(){this.PD&&(this.Ua().length>=this.al?(0,window.confirm)(this.Raa())?(this.Nc(this.Tx),this.va("cancel")):this.focus():this.QD=(0,window.setTimeout)(this.jk.bind(this),100))};z.q(J$,I$);z.f=J$.prototype;z.f.eS=null;z.f.t4=null;z.f.fS=null;z.f.ej=null;z.f.rU=null;z.f.qU=null;z.f.q6=null;z.f.Aw=function(a){this.ej=a;this.rU=a.startIndex;this.qU=a.endIndex;this.q6=a.content;return this};z.f.Raa=function(){var a=z.n("Your note is too long; do you want to abandon your changes?");return(0,z.y)(""+a)};z.f.$0=function(a){var b=z.nC();a=z.zz(a).wt(b).oA(b.gb());this.ej&&a.pz()&&this.Se.Aw(a.pz(),this.ej);var b=this.Se,c;c=z.kI(b.sa,a);D$(b,c.Td()).add(c);return a};
z.f.Paa=function(){return this.Sf()?this.ha.ia(z.Pra,{postId:this.Ya,noteId:this.Sf()}):this.ha.ia(z.Nra,{postId:this.Ya})};z.f.Oaa=function(a){var b=z.nC();a=(new z.yz({content:a,anchor:this.eS,anchorContent:this.t4,anchorImage:this.fS?this.fS.ac():null,replies:[],createdAt:Date.now()})).wt(b);null!=this.rU&&null!=this.qU&&(b=new z.Cz({anchor:this.eS,startIndex:this.rU,endIndex:this.qU,content:this.q6}),a.Aw(b));return a};z.q(K$,I$);K$.prototype.Raa=function(){var a=z.n("Your reply is too long; do you want to abandon your changes?");return(0,z.y)(""+a)};K$.prototype.$0=function(a){var b=z.nC();a=z.Bz(a).wt(b).oA(b.gb());z.I(this.Se.ho(a.Sf(),this.ne),"replies").push(a);return a};K$.prototype.Paa=function(){return this.w8?this.ha.ia(z.Sra,{postId:this.Ya,noteId:this.Sf(),replyId:this.w8}):this.ha.ia(z.Rra,{postId:this.Ya,noteId:this.Sf()})};
K$.prototype.Oaa=function(a){var b=z.nC();return(new z.Az({replyId:"",postId:this.Ya,noteId:this.Sf(),content:a,createdAt:Date.now()})).wt(b)};z.q(M$,z.S);z.f=M$.prototype;
z.f.la=function(){M$.pa.la.call(this);z.T(this.ma()).w("show-note-editor",this.gX,this).w("hide-note-editor",this.nU.bind(this,!0)).w("show-reply-editor",this.dta,this).w("hide-reply-editor",this.Ila,this).w("save-note",this.Lra,this).w("save-reply",this.Nra,this).w("highlight-quote",this.Lla,this).w("dismiss-note",this.g5.bind(this,!0),this).w("delete-note",this.g5.bind(this,!1),this).w("delete-reply",this.zja,this).w("previous-highlight-tip",this.wqa,this).w("next-highlight-tip",this.hna,this);
MWa(this);this.Bi&&m$(this.Bi)&&(LWa(this),z.JD(this,m$(this.Bi),"add",this.toa,this));if(this.sW&&this.C6&&this.E6){var a=this.query(".js-inlineNewPostControl"),b=this.sW,c=this.Za.Ia(),d=new z.$V(this.qa);d.RG("web-inline-quote-responses");d.Wa(a);d.UB=!0;d.fT=!0;d.dT=!0;d.U1(WVa);d.Sx=b;d.ZG(c);z.aW(d,!0);this.uc=d;this.uc.na();a=O$(this.tD);this.va("set-active-highlight",this.ne,a)}this.ej&&(this.gX(),this.pf&&this.pf.focus());P$(this,0)};
z.f.xa=function(){this.mp&&this.mp.cZ();(this.ej||this.tD)&&this.va("reset-highlight",this.ne,null);M$.pa.xa.call(this)};z.f.sb=function(){z.WE(this.ma());z.Rg(this.ma());z.Rr(this.uc);z.Rr(this.pf);z.Rr(this.mp);z.Sr(z.lb(this.hj));this.mp=this.hj=this.pf=this.uc=null;M$.pa.sb.call(this)};z.f.Km=function(){if(this.pf&&this.pf.Ua())return!0;for(var a=z.lb(this.hj),b=0;b<a.length;b++)if(a[b]&&a[b].Ua())return!0;return this.uc&&!this.uc.isDismissable()?!0:!1};
z.f.$t=function(){var a=[],b=[],c=[],d=this.Xx&&(this.ej||this.tD);d||(this.su?(a=this.$d?n$(this.$d,this.su.quotes):[],b=this.su.notes,c=this.su.responses):(b=this.Se?z.sI(D$(this.Se,this.ne)):[],this.wV||(this.$d?(a=this.$d,a=n$(a,a.Rr[this.ne]||[])):a=[],c=this.Bi?t$(this.Bi,this.ne):[])));return z.rC(IWa,{post:this.Za.$a(),quotes:a,notes:b,responses:c,D2:!!this.sW,iQ:d,dH:this.Xx,EA:this.B9,Gza:z.iL(this.Za)})};
z.f.toa=function(){var a=this.query(".js-postList"),b=z.rC(HWa,{responses:t$(this.Bi,this.ne)});z.Sg(b,a);LWa(this)};
z.f.gX=function(){if(this.Xx){if(!this.pf){var a=this.query(".js-noteEditor"),b=z.qC(FWa),a=this.pf=new J$(this.qa,a,this.Za.Ia(),null,b),b=this.ne,c=this.Za.di(this.Ie.get(this.ne)),d=c.Ca(),c=4==c.type?c.Ud():null;a.eS=b;a.t4=d;a.fS=c;(a=this.ej)&&this.pf.Aw(a);z.JD(this,this.pf,"saving",this.apa,this);z.JD(this,this.pf,"fail",this.Una,this);z.JD(this,this.pf,"save",this.Voa,this)}z.cd(this.query(".js-noteActions"),"is-noteEditorVisible");this.pf&&this.pf.focus()}};z.f.Lra=function(){this.pf&&this.pf.save()};
z.f.apa=function(a){this.pf.Nc("");var b=this.query(".js-notesList");a={note:a,post:this.Za.$a(),iQ:this.Xx,dH:this.Xx};a=z.rC(L$,a);b.appendChild(a);z.gd(b,"is-empty");MWa(this);this.nU()};z.f.Voa=function(a){var b=this.query(".js-notesList").lastChild;a=a.Sf();z.cd(b,"js-note-"+a);b.setAttribute("data-note-id",a);(b=b.querySelector(".js-deleteNote"))&&b.setAttribute("data-action-value",a)};z.f.Una=function(){var a=this.query(".js-notesList");a.removeChild(a.lastChild);z.cd(a,"is-empty");this.gX()};
z.f.nU=function(a){a?this.va("close"):this.pf&&(this.pf.Ua()&&this.pf.Nc(""),z.gd(this.query(".js-noteActions"),"is-noteEditorVisible"))};z.f.dta=function(a){(a=N$(a.target))&&this.Xx&&NWa(this,a)};z.f.Nra=function(a){a=N$(a.target);(a=this.hj[a])&&a.save()};
z.f.bpa=function(a){var b=a.Sf();this.hj[b]&&this.hj[b].Nc("");var c=this.Se.ho(b,this.ne).author.userId==a.author.userId,d=this.query(".js-note-"+a.Sf()+" .js-repliesList");a={note:a,post:this.Za.$a(),Tba:c};a=z.rC(L$,a);d.appendChild(a);z.gd(d,"is-empty");OWa(this,b)};z.f.Woa=function(a){var b=this.query(".js-note-"+a.Sf()).querySelector(".js-repliesList").lastChild;a=a.Jv();z.cd(b,"js-reply-"+a);(b=b.querySelector(".js-deleteNote"))&&b.setAttribute("data-action-value",a)};
z.f.Vna=function(a){var b=this.query(".js-note-"+a.Sf()+" .js-repliesList");b.removeChild(b.lastChild);z.cd(b,"is-empty");NWa(this,a.Sf())};z.f.Ila=function(a){(a=N$(a.target))&&OWa(this,a)};z.f.Lla=function(a){a=a.target;var b=a.getAttribute("data-quote-creator-id"),c=H$(this.Ie,this.ne);c&&(this.mp&&this.mp.cZ(),this.mp=QWa(this,c,a,function(){PWa(this,b,!1);z.Rr(this.mp);this.mp=null}),PWa(this,b,!0))};
z.f.Kla=function(a){var b=H$(this.Ie,this.ne);(a=this.Se.ho(a.target.getAttribute("data-note-id"),this.ne))&&b&&(b=(b=a.pz())?this.Se.YN(b):null,this.va("set-active-highlight",this.ne,b))};z.f.Mla=function(a){var b=H$(this.Ie,this.ne),c;c=this.Bi;a=a.target.getAttribute("data-post-id");c=m$(c)?z.hS(m$(c),a):null;b&&c&&(b=r$(c))&&(b=s$(b)&&s$(b).Fm())&&(c=b.Vb())&&c.length&&(b=O$(b),this.va("set-active-highlight",this.ne,b))};
z.f.NX=function(){var a=null;this.tD&&(a=O$(this.tD));this.ej&&(a=this.ej);this.va("reset-highlight",this.ne,a)};
z.f.g5=function(a,b){b=b.value;var c=this.Se.ho(b,this.ne),d=this.query(".js-note-"+b);if(c&&d){z.fx(d);this.NX();this.tb(".js-note-item").every(function(a){return z.bd(a,"u-hide")})&&this.nU(!0);var e=E$(this.Se,c,"HIDDEN");z.v(e.tk,function(b){this.ra.na(a?zWa():AWa(),"error");e.DG();z.gx(d);(400>b.status||499<b.status)&&E$(this.Se,c,"NEW")},this);z.u(this.ra.na(a?CWa():DWa(),{type:"success",FA:!0}),function(){this.ra.Cc();e.DG();E$(this.Se,c,"NEW");z.gx(d)},this)}};
z.f.zja=function(a){var b=a.value,c=this.query(".js-reply-"+b),d=N$(a.target);if(d&&c){z.fx(c);var e=F$(this.Se,b,d,this.Za.Ia(),this.ne,"HIDDEN");z.v(e.tk,function(){this.ra.na(BWa(),"error");e.DG();z.gx(c);F$(this.Se,b,d,this.Za.Ia(),this.ne,"")},this);z.u(this.ra.na(EWa(),{type:"success",FA:!0}),function(){this.ra.Cc();e.DG();F$(this.Se,b,d,this.Za.Ia(),this.ne,"");z.gx(c)},this)}};z.f.wqa=function(){P$(this,this.QJ-1)};z.f.hna=function(){P$(this,this.QJ+1)};z.q(Q$,z.S);z.f=Q$.prototype;z.f.la=function(){Q$.pa.la.call(this);var a=[];z.iL(this.Za)&&a.push(this.Se.load(this.Ya));this.J6||(a.push(this.$d.load(this.Ya)),a.push(this.Bi.load(this.Ya)));this.bu=z.u(z.u(z.u(z.VU(a),function(){this.bu=null},this),this.UP,this),this.wia,this);z.JD(this,this.vb,"resize-end",this.If,this)};z.f.xa=function(){this.bu&&this.bu.cancel();Q$.pa.xa.call(this)};z.f.sb=function(){this.bu=null;Q$.pa.sb.call(this)};z.f.UP=function(){wWa(this.Ie,function(a,b){R$(this,b)},this)};
z.f.If=function(){wWa(this.Ie,function(a,b){XWa(this,b)},this)};z.f.wia=function(){var a=this.$d.En;z.JD(this,a,"add",this.I7,this);z.JD(this,a,"remove",this.I7,this);(a=m$(this.Bi))&&z.JD(this,a,"add",this.Soa,this)};z.f.I7=function(a){RWa(this,Object.keys(z.Vla(this.$d,a instanceof Array?a:[a])))};z.f.Soa=function(a){RWa(this,(a instanceof Array?a:[a]).map(this.Bi.OZ,this.Bi))};z.f.$t=function(a){var b=window.document.createElement("div");b.className="notesMarkers";a.appendChild(b);return b};
z.f.WC=function(a,b){z.ub(a,{startIndex:Math.min(a.startIndex,b.startIndex),endIndex:Math.max(a.endIndex,b.endIndex),notes:a.notes.concat(b.notes),quotes:a.quotes.concat(b.quotes),responses:a.responses.concat(b.responses)})};z.q(S$,z.S);z.f=S$.prototype;
z.f.la=function(){S$.pa.la.call(this);this.Ka(this.La.ma(),"click",this.Kma,this,!0);z.T(this.RC).w("select-anchor",this.cpa,this);var a=this.Za.$a();if(a.Hs()&&!this.Za.jc()){var b=z.iv(a),b=2==a.visibility&&b&&!z.I(b.po(),"memberOfMembershipPlanId");a.allowResponses&&!b&&z.v(this.Bi.load(this.Za.Ia(),"best"),z.yD);z.v(this.$d.load(this.Za.Ia()),z.yD)}a.po().EN()&&(this.BK=z.u(this.Se.load(this.Za.Ia()),this.xoa,this));this.eV&&U$(this);z.JD(this,this.kb,"historyUpdate",function(){U$(this,z.kL())},
this);this.oe&&z.JD(this,this.oe,"highlight",this.voa,this)};z.f.sb=function(){z.Rr(this.Vg);this.Vg=null;z.Rr(this.Tk);this.Tk=null;this.RC&&z.T(this.RC).clear("select-anchor");this.BK&&this.BK.cancel();this.BK=null;S$.pa.sb.call(this)};z.f.Lza=function(a,b){T$(this,b,null,null,a)};z.f.xBa=function(){this.Vg&&this.Vg.If()};z.f.Km=function(){if(!this.Tk)return!1;var a=this.Tk.Ua();return a?a.Km():!1};z.f.soa=function(a){a.subscribe("add",this.J9,this);a.subscribe("remove",this.J9,this)};
z.f.J9=function(a){(z.oa(a)?a:[a]).forEach(function(a){R$(this.Vg,a.Td())},this)};z.f.xoa=function(){var a=(0,z.Ja)();this.BK=null;U$(this,z.kL());this.Ka(this.fn,z.CN,this.KV,this);z.QF("notes.renderMarkers",(0,z.Ja)()-a)};z.f.KV=function(a){(a=a.target.getAttribute("name"))&&H$(this.Ie,a)&&XWa(this.Vg,a)};z.f.voa=function(){if(this.oe){var a=cXa(this,this.oe.Xu);z.YK(this.oe);a&&(a=a.highlight,this.H8(a.anchor,a),T$(this,a.anchor,a))}};
z.f.Kma=function(a){if(this.Tk){var b=a.target;if(!z.Xg(this.Tk.ma(),b)){var c=this.Tk.Ua(),d;if(!(d=!c)){a:if(c.pf&&c.pf.Ua())c=!0;else{d=z.lb(c.hj);for(var e=0;e<d.length;e++)if(d[e]&&d[e].Ua()){c=!0;break a}c=c.uc&&!c.uc.gi()?!0:!1}d=!c}d&&(c=this.Tk&&this.Tk.qm,d="select-anchor"==b.getAttribute("data-action"),this.zW(),c&&d&&z.Xg(c,b)&&a.stopPropagation())}}};
z.f.jm=function(a){if(!(767>=window.innerWidth)){var b=a.qm,c=z.UC(b);a.yk();a=a.ma();var d=z.UC(a),e=window.innerHeight,g=window.innerWidth,h=this.La.query(".js-metabar"),l=0;h&&(l=z.UC(h).height);d.height>=e-l?pWa(a):(z.PC(b),b=c.top+d.height>=e?z.QC().top+e-d.height-10:z.PC(b),c=z.UC(this.RC).left+10,c+d.width>=g&&(c=g-d.width-10),a.style.top=b+"px",a.style.left=c+"px")}};z.f.zW=function(){z.Rr(this.Tk);this.Tk=null};
z.f.cpa=function(a){var b=z.$w(a.target,function(a){return z.bd(a,"js-paragraphControl")},this.S7),b=YWa(this.Vg,a.value,b);T$(this,a.value,null,null,null,b)};z.f.H8=function(a,b){if(this.Za.jc()){var c=z.et();this.xL=(c=c&&xWa(this.Ie,c.Jg()))&&new v$(c)}bXa(this,a,b)};z.f.ura=function(a,b){bXa(this,a,b);this.Za.jc()&&this.xL&&(a=this.xL.restore())&&a.select();this.xL=null};
z.f.Pu=function(a){if(this.Ie&&(a=H$(this.Ie,a))){a=Math.max(z.PC(a),0);var b=window.document.body;this.Rh&&this.Rh.cancel();this.Rh=new z.wC(b,"scrollTop",600,a)}};dXa.prototype.kN=function(a,b,c){return new S$(a,b,c)};z.m(V$,z.S);z.f=V$.prototype;z.f.bd=function(a){this.wa=a};z.f.KAa=function(a){this.dX=a};z.f.LAa=function(a){this.V8=a};z.f.la=function(){this.ma()?(z.S.prototype.la.call(this),z.T(this.ma()).w("show-other-responses",this.b9,this),z.pC(this.ma(),eXa,{post:this.wa}),this.wa.Hs()&&z.v(z.u(z.u(z.u(TVa(this.Sa,this.wa.xb(),"best"),this.t8.bind(this,"best")),this.cra,this),function(){this.YX.d2&&this.b9()},this),z.yD)):z.yD("Attempted to initialize ResponsesStreamControl without root element.")};
z.f.xa=function(){z.T(this.ma()).clear("show-other-responses");z.S.prototype.xa.call(this)};z.f.t8=function(a,b){this.isActive()&&(b=b.nd,"best"==a?(a=this.query(".js-responsesStream"),z.JD(this,b,"add",this.k7.bind(this,b)),this.k7(b)):a=this.query(".js-responsesStreamOther"),b&&(z.Bv()||0<b.re())&&a&&(z.pC(a,z.QT,{items:z.sI(b),context:2}),b=new z.lW(this.qa,b),b.Wa(a),b.Ge(2),this.track(b),z.gx(this.query(".js-responsesStreamWrapper"))),this.V8&&(a=z.PC(a),z.MC(window.document.body,0,a)))};
z.f.cra=function(){var a=this.query(".js-inlineNewPostControl"),b=this.query(".js-responsesLoggedOutPrompt");z.Bv()?a?(this.uc=z.aW(MVa((new z.$V(this.qa)).RG("web-inline-post-response").ZG(this.wa.xb()),z.oC(z.lk,{post:this.wa,WP:!0})),this.dX).Wa(a),this.track(this.uc)):b&&this.dX&&(a=z.OC(b),b=z.PC(b),z.MC(a,0,b)):b&&z.cd(b,"u-hide")};
z.f.b9=function(){this.QV||(this.QV=z.Mc(z.u(z.u(TVa(this.Sa,this.wa.xb(),"other"),this.t8.bind(this,"other")),function(){z.fx(this.query(".js-showOtherResponses"));this.YX.d2=!0},this),function(){this.QV=null},this))};z.f.k7=function(a){(a=a.ek)&&a.next&&"other"==a.next.filter&&!this.YX.d2&&(z.gx(this.query(".js-responsesStreamWrapper")),z.gx(this.query(".js-showOtherResponses")))};z.f.vv=function(){this.uc&&(z.JU(this.uc.ma(),new z.kt(60,0,200,0)),this.uc.vv())};z.q(W$,z.FD);W$.prototype.focus=function(){this.isActive&&this.Qw.focus()};W$.prototype.close=function(){this.Qw&&!this.Qw.closed&&this.Qw.close();this.va("close");this.sf()};W$.prototype.isActive=function(){return this.Qw?!this.Qw.closed:!1};W$.prototype.Na=function(){this.Qw=null;W$.pa.Na.call(this)};X$.prototype.fQ=function(a,b,c){var d;d=z.Lr;var e=new z.kk(z.Kr(d)),e=new z.Gd(e.sm(a));d=YVa(e,d);this.kD(d);z.rE(z.hO,{postId:a.id,type:b,source:c,dest:"facebook",dialogType:"native"})};X$.prototype.Y1=function(a){var b;b=z.Lr;var c=new z.kk(z.Kr(b));a=new z.Gd(c.ia(z.gB,{catalogSlug:a.Dd(),username:a.We().Dl()}));b=YVa(a,b);this.kD(b)};X$.prototype.IZ=function(){var a=this.ha.ia(z.tra);return this.ka.get(a)};X$.prototype.kD=function(a){fXa(a,"facebook-share",{width:550,height:320})};var iXa=/(?:https?:\/\/|www\.)\w[\w~#-@![\]]*/g;z.q(Z$,z.Pr);
Z$.prototype.open=function(a,b){this.wa=a;this.av=b;this.ya=this.RB.open({bodyHtml:z.oC(dWa,this.av),type:"tweet"},!0);a=this.ya.query(".js-tweetEditor-text");b=this.qa;var c=String,d;d=z.n("Enter tweet text.");d=(0,z.y)(""+d);this.pE=new z.O1(b,a,c(d),!0);a=new z.l1(140,!0);a.S4=Y$;this.pE.Va(a);a=hXa($Va,this.av,z.Lr);this.pE.Nc(a);this.pE.focus();kXa(this);z.T(this.ya.Wb).w("remove-textshot",this.M8.bind(this,!1),this).w("add-textshot",this.M8.bind(this,!0),this).w("toggle-expand-image",this.Yta,
this);this.ya.subscribe("submit",this.Gua.bind(this))};Z$.prototype.Gua=function(){var a=this.pE.Ua();if(lXa(this,a)){var b=this.WJ?jXa(this):null;z.v(z.u(this.ka.post(this.ha.ia(z.rra),{tweet:a,textshotInfo:b}),function(a){a=z.qC(bWa,{id:a.value});a=z.oC(fWa,{sBa:a});this.ra.na(a,{type:"success",Po:1E4})},this),function(a){z.yD(a);this.ra.na(eWa(),"error")},this);z.KF(z.Zta,{postId:this.wa.id,type:this.av.shareType,source:this.av.PAa,dest:"twitter",style:this.WJ?"textshot":null});this.ya.close()}};
Z$.prototype.M8=function(a){this.WJ=a;z.id(this.ya.query(".js-tweetEditor-imageContainer"),"u-hide",!a);z.id(this.ya.query(".js-tweetEditor-addTextshot"),"u-hide",a)};Z$.prototype.Yta=function(){var a=this.ya.query(".js-tweetEditor-image");z.kd(a,"tweetEditor-image--expanded")};$$.prototype.OAa=function(a,b){var c=z.xv(),d=a.creator||{},e=RVa(b),g=QVa(b),h=gXa(a,z.Lr);(b=qWa(SVa(b)))&&z.Od(h,b||"");var l={name:d.name||"",username:d.username||"",twitterScreenName:d.twitterScreenName||"",url:h.toString(),content:a.title,user:c,lBa:e,kBa:g,shareType:"highlight",PAa:"highlight_menu"};z.v(z.u(this.qa.load("tweet-dialog"),function(b){b.open(a,l)}),z.yD);z.KF(z.hO,{postId:a.id,type:"highlight",source:"highlight_menu",dest:"twitter",dialogType:"inapp"});return!0};
$$.prototype.fQ=function(a,b,c,d,e){var g=z.xv().userId,h="highlight"==c?$Va:z.uma,l=z.Lr,p=a.creator||{};b={content:b,name:p.name||"",username:p.username||"",twitterScreenName:p.twitterScreenName||"",r$:p.userId==g,url:gXa(a,l).toString(),collaborators:d||[]};d=d&&d.length?String(h(b,null,l)):hXa(h,b,l);h=new z.Gd("https://twitter.com/intent/tweet");z.Sd(h,"text",d);this.kD(h);z.rE(z.hO,{postId:a.id,type:c,source:e,dest:"twitter",dialogType:"native"})};
$$.prototype.Y1=function(a){var b=z.Lr,c=new z.kk(z.Kr(b)),c=(new z.Gd(c.ia(z.gB,{catalogSlug:a.Dd(),username:a.We().Dl()}))).toString();a=z.B(""+z.no(String(a.name))+((null==a.creator?null:a.creator.userId)!=b.currentUser.userId?" — "+z.tL({twitterScreenName:null==a.creator?null:a.creator.twitterScreenName,name:null==a.creator?null:a.creator.name}):"")+" "+(""+c));b=new z.Gd("https://twitter.com/intent/tweet");z.Sd(b,"text",a);this.kD(b)};
$$.prototype.kD=function(a){fXa(a,"twitter-share",{width:670,height:420})};var mXa=z.nF,nXa=mXa.Fa();nXa.scope("screen").add("quotes",uWa).add("quote-responses",dXa).add("responses-stream-control",V$).add("notes-data",C$);z.rF(nXa.scope("app"),"PlacementsControl",G$).add("twitter",$$).add("facebook",X$).add("tweet-dialog",Z$);z.iS(mXa,"notes");}).call(this, _mdm);
